---
layout: default
---

<section class="usa-section">
  <div class="grid-container-full">

    <div class="grid-row grid-gap">

      <!-- Sidebar navigation -->

      <aside class="grid-col-12 tablet:grid-col-3">
        <img src="{{ page.thumbnail | relative_url }}" alt="{{ page.title }} module image" class="page-thumbnail">
        <br />
        {% if page.description %}
          <div class="usa-prose margin-bottom-2">
            {{ page.description }}
          </div>
        {% endif %}
        
        {%- comment -%}
          Show the View ERD button if a mermaid code block is present in the content (from a fenced code block),
          not just if a specific section header or div is present.
        {%- endcomment -%}
        {% assign mermaid_block = page.content | split:'<pre><code class="language-mermaid">' | last | split:'</code></pre>' | first %}
        {% if mermaid_block != page.content %}
          <p class="margin-top-2">
            <button
              type="button"
              class="usa-button usa-button--primary open-erd-modal"
              style="width: 100%"
              data-erd-slug="{{ page.slug }}">
              View ERD
            </button>
          </p>
        {% endif %}
        
        <nav class="sidenav-sticky" aria-label="Section navigation">
          {% include sidenav.html %}
        </nav>
      </aside>

      <!-- Main content (right side) -->
      <main class="grid-col-12 tablet:grid-col-9 usa-prose">

        <!-- Header row: breadcrumbs + page title -->
        <div class="grid-row grid-gap">
          <div class="grid-col-12 usa-prose">
            {% include breadcrumbs.html %}
          </div>
        </div>

        <!-- Content row: main column + small right column -->
        <div class="grid-row grid-gap">

          <!-- Main column -->
          <div class="grid-col-12 tablet:grid-col-9 usa-prose">

            <h1 class="mgat-solution-heading">{{ page.title }}</h1>
            <hr />

            {% include tabs.html
            ns=page.slug
            tabs="Overview:overview|Data Model:erd|How-to / Guides:guides"
            %}

            <!-- OVERVIEW panel -->
            <section id="panel-{{ page.slug }}-overview" class="mgat-subnav__panel usa-prose" role="tabpanel"
              data-panel="{{ page.slug }}">
              {{ content }}
            </section>

            <!-- ERD panel -->
            <section id="panel-{{ page.slug }}-erd" class="mgat-subnav__panel usa-prose" role="tabpanel"
              data-panel="{{ page.slug }}">
              
              <p>The Asset Management module is built on a comprehensive data model that tracks assets throughout their lifecycle. The Entity Relationship Diagram (ERD) below shows the key tables and their relationships:</p>

              {%- comment -%}
                Extract the first Mermaid code block from the page content (from a fenced code block),
                and use it for both the modal and the diagram. This allows authors to use regular
                ```mermaid fenced code blocks in markdown, with no front matter or data-raw needed.
              {%- endcomment -%}
              {% assign mermaid_block = content | split:'<pre><code class="language-mermaid">' | last | split:'</code></pre>' | first %}
              {% if mermaid_block != content %}
                <textarea id="erd-mermaid-{{ page.slug }}" style="display:none;">{{ mermaid_block | strip }}</textarea>
              {% endif %}

              <h2 class="margin-top-4">Tables</h2>
              {% include tables.html %}
            </section>

            <!-- GUIDES panel -->
            <section id="panel-{{ page.slug }}-guides" class="mgat-subnav__panel usa-prose" role="tabpanel"
              data-panel="{{ page.slug }}">
              {% include doclist.html %}
            </section>
          </div>

          <!-- Small right column (download + personas) -->
          <div class="grid-col-12 tablet:grid-col-3">
            {% if page.latest_release %}
              {% if page.release_url %}
                <a class="usa-button" href="{{ page.release_url }}" download>Download Latest Release ({{ page.latest_release }})</a>
              {% else %}
                {% assign raw_base = 'https://github.com/microsoft/gov-apptemplates/raw/main/' %}
                <a class="usa-button" href="{{ raw_base }}modules/{{ page.slug }}/releases/{{ page.latest_release }}/MS-Gov-{{ page.slug | capitalize }}-{{ page.latest_release }}.zip" download>Download Latest Release ({{ page.latest_release }})</a>
              {% endif %}
            {% endif %}

            {% if page.credits %}
              <div class="usa-prose margin-top-3">
                <h3>Credit</h3>
                {% for credit in page.credits %}
                  {% if credit.url %}
                    <p><a href="{{ credit.url }}" target="_blank" rel="noopener">{{ credit.name }}{% if credit.company %} ({{ credit.company }}){% endif %}</a></p>
                  {% else %}
                    <p>{{ credit.name }}{% if credit.company %} ({{ credit.company }}){% endif %}</p>
                  {% endif %}
                {% endfor %}
              </div>
            {% endif %}

            {% include related-items.html to="modules" %}
            {% include related-items.html to="data_models" %}
            {% include related-items.html to="use_cases" %}
            {% include related-items.html to="personas" %}

          </div>

        </div>

      </main>
    </div>
</section>

{% comment %} ERD modal (injected per-page) {% endcomment %}
<div id="erd-modal-{{ page.slug }}" class="erd-modal" aria-hidden="true" role="dialog" aria-labelledby="erd-modal-title-{{ page.slug }}" tabindex="-1">
  <div class="erd-modal__backdrop" data-close="true"></div>
  <div class="erd-modal__dialog" role="document">
    <header class="erd-modal__header">
      <h2 id="erd-modal-title-{{ page.slug }}">ERD — {{ page.title }}</h2>
      <button class="erd-modal__close" aria-label="Close ERD" data-close="true">&times;</button>
    </header>
    <div class="erd-modal__content">
      <div class="erd-modal__inner">Loading…</div>
    </div>
  </div>
</div>

<script src="{{ '/assets/js/erd-modal.js' | relative_url }}" defer></script>