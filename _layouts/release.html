---
layout: default
---

<section class="usa-section">
  <div class="grid-container-full">

    <div class="grid-row grid-gap">

      <!-- Sidebar navigation -->
      <aside class="grid-col-12 tablet:grid-col-3">

        {% comment %} Find the parent solution (docs have `parent: <slug>`) {% endcomment %}
        {% assign parent_item = nil %}
        {% if page.parent %}
          {% comment %} choose collection that contains the parent solution {% endcomment %}
          {% assign parent_collection = "modules" %}
          {% if page.collection == "data_model_releases" or page.collection == "data_models" %}
            {% assign parent_collection = "data_models" %}
          {% elsif page.collection == "portal_releases" or page.collection == "portals" %}
            {% assign parent_collection = "portals" %}
          {% endif %}

          {% assign parent_item = site[parent_collection] | where: "slug", page.parent | first %}
          {% if parent_item == nil %}
            {% if parent_collection == "modules" %}
              {% capture base_path %}modules{% endcapture %}
            {% elsif parent_collection == "portals" %}
              {% capture base_path %}portals{% endcapture %}
            {% else %}
              {% capture base_path %}data-models{% endcapture %}
            {% endif %}
            {% capture sol_url %}/{{ base_path }}/{{ page.parent }}/{% endcapture %}
            {% assign parent_item = site[parent_collection] | where: "url", sol_url | first %}
          {% endif %}
        {% endif %}

        {% if parent_item %}
          {% include card.html
            type="solution"
            title=parent_item.title
            url=parent_item.url
            description=parent_item.description
            shrink=true
            thumbnail=parent_item.thumbnail %}
        {% else %}
            {% include card.html
            type="solution"
            title=page.title
            url=page.url
            summary=page.summary
            tags=page.use_cases
            personas=page.personas
            repo=page.repo
            shrink=true
            thumbnail=page.thumbnail %}
        {% endif %}
      </aside>

      <!-- Main content (right side) -->
      <main class="grid-col-12 tablet:grid-col-9 usa-prose main-content">

        <!-- Header row: breadcrumbs + page title -->
        <div class="grid-row grid-gap">
          <div class="grid-col-12 usa-prose">
            {% include breadcrumbs.html %}
          </div>
        </div>

        <!-- Content row: main column + small right column -->
        <div class="grid-row grid-gap">

          <!-- Main column -->
          <div class="grid-col-12 tablet:grid-col-9 usa-prose">

            <h1 class="mgat-solution-heading">{{ page.title }}</h1>
            <hr />

            {{ page.description }}
            {{ content }}

          </div>

          <!-- Small right column (download + personas) -->
          <div class="grid-col-12 tablet:grid-col-3">
            {% if page.collection == "app_releases" %}
              {% if page.custom_release_file %}
                <a class="usa-button" href="{{ page.custom_release_file }}" download>Download This Release</a>
              {% elsif page.release_file %}
                {% assign rf = page.release_file | default: "" | strip %}
                {% if rf != "" %}
                  {% assign rf_prefix = rf | slice: 0,6 %}
                  {% if rf_prefix == "MS-Gov" %}
                    {% assign module_path = page.module_type | default: "modules" %}
                    <a class="usa-button"
                      href="https://github.com/microsoft/gov-apptemplates/raw/main/{{ module_path }}/{{ page.parent }}/releases/{{ page.release_file }}"
                      download>Download This Release</a>
                  {% else %}
                    {% assign module_path = page.module_type | default: "federal" %}
                    <a class="usa-button"
                      href="https://github.com/microsoft/gov-apptemplates/raw/main/{{ module_path }}/{{ page.parent }}/releases/{{ page.version }}/{{ page.release_file }}"
                      download>Download This Release</a>
                  {% endif %}
                {% else %}
                  {% assign module_path = page.module_type | default: "federal" %}
                  <a class="usa-button"
                    href="https://github.com/microsoft/gov-apptemplates/raw/main/{{ module_path }}/{{ page.parent }}/releases/{{ page.version }}/{{ page.release_file }}"
                    download>Download This Release</a>
                {% endif %}
              {% elsif page.download %}
                <a class="usa-button"
                  href="https://github.com/microsoft/gov-apptemplates/raw/main/{{ page.download }}" download>Download This Release</a>
              {% else %}
                <div></div>
              {% endif %}
            {% elsif page.collection == "data_model_releases" %}
              {% if page.custom_release_file %}
                <a class="usa-button" href="{{ page.custom_release_file }}" download>Download This Release</a>
              {% elsif page.release_file %}
                {% assign module_path = page.module_type | default: "modules" %}
                <a class="usa-button"
                  href="https://github.com/microsoft/gov-datamodels/raw/refs/heads/main/{{ module_path }}/{{ page.parent }}/releases/{{ page.version }}/{{ page.release_file }}"
                  download>Download This Release</a>
              {% elsif page.download %}
                <a class="usa-button"
                  href="https://github.com/microsoft/gov-datamodels/raw/refs/heads/main/{{ page.download }}"
                  download>Download This Release</a>
              {% else %}
                <div></div>
              {% endif %}
            {% elsif page.collection == "portal_releases" %}
              {% if page.custom_release_file %}
                <a class="usa-button" href="{{ page.custom_release_file }}" download>Download This Release</a>
              {% elsif page.release_file %}
                {% assign rf = page.release_file | default: "" | strip %}
                {% if rf != "" %}
                  {% assign rf_prefix = rf | slice: 0,6 %}
                  {% if rf_prefix == "MS-Gov" %}
                    {% assign module_path = page.module_type | default: "portals" %}
                    {% assign repo_folder = page.repo_path | default: page.parent %}
                    <a class="usa-button"
                      href="https://github.com/microsoft/gov-apptemplates/raw/main/{{ module_path }}/{{ repo_folder }}/releases/{{ page.release_file }}"
                      download>Download This Release</a>
                  {% else %}
                    {% assign module_path = page.module_type | default: "portals" %}
                    {% assign repo_folder = page.repo_path | default: page.parent %}
                    <a class="usa-button"
                      href="https://github.com/microsoft/gov-apptemplates/raw/main/{{ module_path }}/{{ repo_folder }}/releases/{{ page.version }}/{{ page.release_file }}"
                      download>Download This Release</a>
                  {% endif %}
                {% else %}
                  <div></div>
                {% endif %}
              {% elsif page.download %}
                <a class="usa-button"
                  href="https://github.com/microsoft/gov-apptemplates/raw/main/{{ page.download }}" download>Download This Release</a>
              {% else %}
                <div></div>
              {% endif %}
             {% else %}
               <div></div>
             {% endif %}

            {% if page.credits %}
              <div class="usa-prose margin-top-3">
                <h3>Credit</h3>
                {% for credit in page.credits %}
                  {% if credit.url %}
                    <p><a href="{{ credit.url }}" target="_blank" rel="noopener">{{ credit.name }}{% if credit.company %} ({{ credit.company }}){% endif %}</a></p>
                  {% else %}
                    <p>{{ credit.name }}{% if credit.company %} ({{ credit.company }}){% endif %}</p>
                  {% endif %}
                {% endfor %}
              </div>
            {% endif %}

            <!-- <aside class="usa-in-page-nav" data-title-text="On this page" data-title-heading-level="h2" data-target="#doc-main-column"
              data-scroll-offset="0" data-root-margin="0px 0px 0px 0px" data-threshold="1"></aside> -->

          </div>

        </div>

      </main>
    </div>
</section>