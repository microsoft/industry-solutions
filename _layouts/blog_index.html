---
layout: default
---
<section class="usa-section">
  <div class="grid-container-full">
    <div class="grid-row grid-gap">
      
      <!-- Main content -->
      <main class="grid-col-12 tablet:grid-col-9 usa-prose">
        <div class="grid-row grid-gap">
          <div class="grid-col-12 usa-prose">
            {% include breadcrumbs.html %}
          </div>
        </div>

        <header class="margin-bottom-4">
          <h1 class="usa-prose__heading">{{ page.title }}</h1>
          {% if page.description %}<p>{{ page.description }}</p>{% endif %}
        </header>

        {% if site.posts and site.posts.size > 0 %}
          {% comment %} Collect all tags from posts first {% endcomment %}
          {% assign all_tags = "" | split: "," %}
          {% for post in site.posts %}
            {% if post.tags %}
              {% for tag in post.tags %}
                {% unless all_tags contains tag %}
                  {% assign all_tags = all_tags | push: tag %}
                {% endunless %}
              {% endfor %}
            {% endif %}
          {% endfor %}
          {% assign sorted_tags = all_tags | sort %}

          {% comment %} Dynamic content area {% endcomment %}
          <div id="posts-container">
            
            {% comment %} Default view - show all posts (most recent first) {% endcomment %}
            <div id="all-posts" class="tag-section">
              <div class="blog-post-list">
                {% assign sorted_posts = site.posts | sort: 'date' | reverse %}
                {% for post in sorted_posts %}
                  <article class="blog-post-item">
                    <div class="blog-post-content">
                      <div class="blog-post-meta">
                        <time class="blog-post-date">{{ post.date | date: "%B %-d, %Y" }}</time>
                      </div>
                      <h2 class="blog-post-title">
                        <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                      </h2>
                      {% if post.description %}
                        <p class="blog-post-excerpt">{{ post.description }}</p>
                      {% elsif post.excerpt %}
                        <p class="blog-post-excerpt">{{ post.excerpt | strip_html | truncate: 200 }}</p>
                      {% endif %}
                      {% if post.tags and post.tags.size > 0 %}
                        <div class="blog-post-tags">
                          {% for tag in post.tags %}
                            <span class="usa-tag usa-tag--small">{{ tag }}</span>
                          {% endfor %}
                        </div>
                      {% endif %}
                    </div>
                  </article>
                {% endfor %}
              </div>
            </div>

            {% comment %} Individual tag sections - use cached sorted_posts {% endcomment %}
            {% for tag in sorted_tags %}
              <div id="{{ tag | slugify }}-posts" class="tag-section" style="display: none;">
                <h2>{{ tag | capitalize }}</h2>
                {% assign tag_post_count = 0 %}
                <div class="blog-post-list">
                  {% for post in sorted_posts %}
                    {% if post.tags contains tag %}
                      {% assign tag_post_count = tag_post_count | plus: 1 %}
                      <article class="blog-post-item">
                        <div class="blog-post-content">
                          <div class="blog-post-meta">
                            <time class="blog-post-date">{{ post.date | date: "%B %-d, %Y" }}</time>
                          </div>
                          <h2 class="blog-post-title">
                            <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                          </h2>
                          {% if post.description %}
                            <p class="blog-post-excerpt">{{ post.description }}</p>
                          {% elsif post.excerpt %}
                            <p class="blog-post-excerpt">{{ post.excerpt | strip_html | truncate: 200 }}</p>
                          {% endif %}
                          {% if post.tags and post.tags.size > 0 %}
                            <div class="blog-post-tags">
                              {% for tag in post.tags %}
                                <span class="usa-tag usa-tag--small">{{ tag }}</span>
                              {% endfor %}
                            </div>
                          {% endif %}
                        </div>
                      </article>
                    {% endif %}
                  {% endfor %}
                </div>
                <p class="text-base-italic margin-bottom-3">{{ tag_post_count }} post{% if tag_post_count != 1 %}s{% endif %} tagged with "{{ tag }}" (most recent first)</p>
              </div>
            {% endfor %}

          </div>
        {% else %}
        <div class="usa-alert usa-alert--info">
          <div class="usa-alert__body">
            <h3 class="usa-alert__heading">Coming Soon</h3>
            <p class="usa-alert__text">No blog posts yet. Check back soon for updates and announcements.</p>
          </div>
        </div>
        {% endif %}
      </main>

      <!-- Right sidebar with tag navigation -->
      <aside class="grid-col-12 tablet:grid-col-3">
        {% if site.posts and site.posts.size > 0 and sorted_tags.size > 0 %}
            <nav class="sidenav-sticky" aria-label="Filter posts by topic">
              <h3 class="margin-top-2">Browse Posts</h3>
              <ul class="usa-sidenav">
                <li class="usa-sidenav__item">
                  <a href="{{ page.url | relative_url }}" data-tag="all" class="blog-tag-link">
                    <div class="blog-tag-item">
                      <span class="blog-tag-name">All Posts</span>
                      <span class="blog-tag-count">({{ site.posts.size }})</span>
                    </div>
                  </a>
                </li>
                {% for tag in sorted_tags %}
                  {% assign tag_count = 0 %}
                  {% for post in sorted_posts %}
                    {% if post.tags contains tag %}
                      {% assign tag_count = tag_count | plus: 1 %}
                    {% endif %}
                  {% endfor %}
                  <li class="usa-sidenav__item">
                    <a href="{{ page.url | relative_url }}#{{ tag | slugify }}" data-tag="{{ tag | slugify }}" class="blog-tag-link">
                      <div class="blog-tag-item">
                        <span class="blog-tag-name">{{ tag | capitalize }}</span>
                        <span class="blog-tag-count">({{ tag_count }})</span>
                      </div>
                    </a>
                  </li>
                {% endfor %}
              </ul>
            </nav>
        {% endif %}
      </aside>
    </div>
  </div>
</section>

<style>
/* Blog tag sidebar styling */
.blog-tag-link {
  text-decoration: none;
  display: block;
  transition: all 0.2s ease;
}

.blog-tag-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}

.blog-tag-name {
  font-weight: 500;
  flex-grow: 1;
}

.blog-tag-count {
  font-size: 0.875rem;
  color: #5c5c5c;
  font-weight: normal;
}

.usa-sidenav__item a.blog-tag-link:hover .blog-tag-count {
  color: inherit;
}

.usa-sidenav__item a.blog-tag-link.active {
  background-color: #0066cc;
  color: white;
  font-weight: 600;
}

.usa-sidenav__item a.blog-tag-link.active .blog-tag-count {
  color: white;
}

.usa-sidenav__item a.blog-tag-link.active:hover {
  color: white;
}

.usa-sidenav__item a.blog-tag-link.active:hover .blog-tag-count {
  color: white;
}

.tag-section {
  transition: opacity 0.3s ease;
}

.tag-section.fade-in {
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Better spacing for tag sections */
#posts-container h2 {
  margin-bottom: 1rem;
}

/* Blog post list styling */
.blog-post-list {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.blog-post-item {
  border: 1px solid #c6c6c6;
  border-radius: 8px;
  padding: 1.5rem;
  background-color: #ffffff;
  transition: box-shadow 0.2s ease, border-color 0.2s ease;
}

.blog-post-item:hover {
  border-color: #a6a6a6;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.blog-post-content {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.blog-post-meta {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
  margin-bottom: 0rem;
}

.blog-post-date {
  color: #5c5c5c;
  font-size: 0.875rem;
  font-style: italic;
}

.blog-post-tags {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.blog-post-title {
  margin: 0 !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  padding: 0;
  font-size: 1.5rem;
  line-height: 1.3;
}

.blog-post-title a {
  color: #1b1b1b;
  text-decoration: none;
  transition: color 0.2s ease;
}

.blog-post-title a:hover {
  color: #0066cc;
  text-decoration: underline;
}

.blog-post-excerpt {
  color: #5c5c5c;
  line-height: 1.5;
  margin: 0;
  margin-top: 0.5rem;
}

.blog-post-tags {
  margin-top: 0.5rem;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const tagLinks = document.querySelectorAll('.blog-tag-link[data-tag]');
  const tagSections = document.querySelectorAll('.tag-section');
  
  function showTagSection(targetTag) {
    // Hide all sections
    tagSections.forEach(section => {
      section.style.display = 'none';
    });
    
    // Remove active class from all tag links
    tagLinks.forEach(link => {
      link.classList.remove('active');
    });
    
    // Show the target section
    let targetSection;
    if (targetTag === 'all') {
      targetSection = document.getElementById('all-posts');
    } else {
      targetSection = document.getElementById(targetTag + '-posts');
    }
    
    if (targetSection) {
      targetSection.style.display = 'block';
      targetSection.classList.add('fade-in');
      
      // Remove fade-in class after animation
      setTimeout(() => {
        targetSection.classList.remove('fade-in');
      }, 300);
    }
    
    // Add active class to clicked tag
    const activeLink = document.querySelector(`.blog-tag-link[data-tag="${targetTag}"]`);
    if (activeLink) {
      activeLink.classList.add('active');
    }
  }
  
  // Handle tag link clicks
  tagLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const targetTag = this.getAttribute('data-tag');
      showTagSection(targetTag);
      
      // Update URL
      if (targetTag === 'all') {
        history.pushState(null, null, window.location.pathname);
      } else {
        history.pushState(null, null, window.location.pathname + '#' + targetTag);
      }
    });
  });
  
  // Handle initial page load with hash
  function initializePage() {
    const hash = window.location.hash.substring(1);
    if (hash && hash !== '') {
      showTagSection(hash);
    } else {
      showTagSection('all');
    }
  }
  
  // Handle browser back/forward buttons
  window.addEventListener('popstate', function() {
    initializePage();
  });
  
  // Initialize page
  initializePage();
});
</script>
